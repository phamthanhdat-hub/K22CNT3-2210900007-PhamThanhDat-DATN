<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard | BabyCutie</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- ================= ADMIN HEADER ================= -->
<header class="header">
    <div class="container header-wrap">
        <div class="logo">
            <span>üõ† BabyCutie Admin</span>
        </div>

        <button class="btn-login" onclick="logoutAdmin()">ƒêƒÉng xu·∫•t</button>
    </div>
</header>

<!-- ================= DASHBOARD ================= -->
<section class="container mt-5">

    <h2 class="mb-4">üìä B·∫£ng ƒëi·ªÅu khi·ªÉn</h2>

    <!-- STATISTIC -->
    <div class="row" id="thongKeRow">
        <div class="col-md-3">
            <div class="admin-card">
                <h4>üë∂ Ng∆∞·ªùi d√πng</h4>
                <p id="soNguoiDung">-</p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="admin-card">
                <h4>üç≤ S·∫£n ph·∫©m</h4>
                <p id="soSanPham">-</p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="admin-card">
                <h4>üßæ ƒê∆°n h√†ng</h4>
                <p id="soDonHang">-</p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="admin-card">
                <h4>üí∞ Doanh thu</h4>
                <p id="tongDoanhThu">-</p>
            </div>
        </div>
    </div>

    <!-- MENU -->
    <div class="row mt-5">

        <!-- QU·∫¢N L√ù S·∫¢N PH·∫®M -->
        <div class="col-md-4">
            <div class="admin-menu" onclick="location='admin-san-pham.html'">
                <i class="fa fa-box"></i>
                <h5>Qu·∫£n l√Ω s·∫£n ph·∫©m</h5>
                <p>Th√™m ‚Äì s·ª≠a ‚Äì x√≥a ch√°o dinh d∆∞·ª°ng</p>
            </div>
        </div>

        <!-- ‚úÖ QU·∫¢N L√ù ƒê∆†N H√ÄNG (ƒê√É G·∫ÆN LINK) -->
        <div class="col-md-4">
            <div class="admin-menu" onclick="location='admin-don-hang.html'">
                <i class="fa fa-receipt"></i>
                <h5>Qu·∫£n l√Ω ƒë∆°n h√†ng</h5>
                <p>X√°c nh·∫≠n & x·ª≠ l√Ω ƒë∆°n</p>
            </div>
        </div>

        <!-- QU·∫¢N L√ù KHUY·∫æN M√ÉI -->
        <div class="col-md-4">
            <div class="admin-menu" onclick="location='admin-khuyen-mai.html'">
                <i class="fa fa-tags"></i>
                <h5>Qu·∫£n l√Ω khuy·∫øn m√£i</h5>
                <p>M√£ gi·∫£m gi√° & ∆∞u ƒë√£i</p>
            </div>
        </div>

        <!-- QU·∫¢N L√ù TIN T·ª®C -->
        <div class="col-md-4">
            <div class="admin-menu" onclick="location='admin-tin-tuc.html'">
                <i class="fa fa-newspaper"></i>
                <h5>Qu·∫£n l√Ω tin t·ª©c</h5>
                <p>B√†i vi·∫øt & th√¥ng b√°o</p>
            </div>
        </div>

        <!-- QU·∫¢N L√ù LI√äN H·ªÜ -->
        <div class="col-md-4">
            <div class="admin-menu" onclick="location='admin-lien-he.html'">
                <i class="fa fa-envelope"></i>
                <h5>Qu·∫£n l√Ω li√™n h·ªá</h5>
                <p>Tin nh·∫Øn t·ª´ kh√°ch h√†ng</p>
            </div>
        </div>

        <!-- QU·∫¢N L√ù ƒê√ÅNH GI√Å -->
        <div class="col-md-4">
            <div class="admin-menu" onclick="location='admin-danh-gia.html'">
                <i class="fa fa-star"></i>
                <h5>Qu·∫£n l√Ω ƒë√°nh gi√°</h5>
                <p>ƒê√°nh gi√° s·∫£n ph·∫©m</p>
            </div>
        </div>

        <!-- QU·∫¢N L√ù THANH TO√ÅN -->
        <div class="col-md-4">
            <div class="admin-menu" onclick="location='admin-thanh-toan.html'">
                <i class="fa fa-credit-card"></i>
                <h5>Qu·∫£n l√Ω thanh to√°n</h5>
                <p>Xem & c·∫≠p nh·∫≠t tr·∫°ng th√°i thanh to√°n</p>
            </div>
        </div>

    </div>

</section>

<script>
// Ki·ªÉm tra ƒëƒÉng nh·∫≠p
const adminToken = localStorage.getItem("admin_token");
if (!adminToken) {
    window.location.href = "login-admin.html";
}

// Load th·ªëng k√™
fetch("http://127.0.0.1:5000/api/admin/dashboard/thong-ke")
    .then(res => res.json())
    .then(data => {
        document.getElementById("soNguoiDung").textContent = data.soNguoiDung || 0;
        document.getElementById("soSanPham").textContent = data.soSanPham || 0;
        document.getElementById("soDonHang").textContent = data.soDonHang || 0;
        document.getElementById("tongDoanhThu").textContent = 
            new Intl.NumberFormat('vi-VN').format(data.tongDoanhThu || 0) + "ƒë";
    })
    .catch(err => {
        console.error("L·ªói load th·ªëng k√™:", err);
    });

function logoutAdmin() {
    localStorage.removeItem("admin_token");
    localStorage.removeItem("admin_info");
    window.location.href = "login-admin.html";
}
</script>

</body>
</html>
