<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>BabyCutie ‚Äì Ch√°o dinh d∆∞·ª°ng cho b√©</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/home.css">
</head>
<body>

<!-- ================= HEADER ================= -->
<header class="header">
    <div class="container header-wrap">

        <!-- LOGO -->
        <div class="logo" onclick="window.location='index.html'">
            <img src="images/logo2.jpg" alt="BabyCutie">
            <span>BabyCutie</span>
        </div>

        <!-- SEARCH -->
        <div class="search">
            <i class="fa fa-search"></i>
            <input type="text" id="searchInput" placeholder="T√¨m m√≥n ƒÉn cho b√©..." onkeyup="handleSearch(event)">
        </div>

        <!-- MENU -->
        <nav class="main-menu">
            <a href="index.html" class="active">Trang ch·ªß</a>
            <a href="thuc-don.html">Th·ª±c ƒë∆°n</a>
            <a href="tin-tuc.html">Tin t·ª©c</a>
            <a href="lien-he.html">Li√™n h·ªá</a>
        </nav>

        <!-- CART -->
        <div class="cart-icon" onclick="window.location='gio-hang.html'">
            <i class="fa-solid fa-cart-shopping"></i>
            <span class="cart-count" id="cartCount">0</span>
        </div>

        <!-- LOGIN / USER INFO -->
        <div class="login-group">
            <div id="userInfo" style="display: none;">
                <div class="dropdown">
                    <button class="btn-login dropdown-toggle" data-bs-toggle="dropdown">
                        <i class="fa fa-user"></i> <span id="userName"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="don-hang-cua-toi.html">üì¶ ƒê∆°n h√†ng c·ªßa t√¥i</a></li>
                        <li><a class="dropdown-item" href="#" onclick="logout()">ƒêƒÉng xu·∫•t</a></li>
                    </ul>
                </div>
            </div>
            <div id="loginBtn">
            <div class="dropdown">
                <button class="btn-login dropdown-toggle" data-bs-toggle="dropdown">
                    <i class="fa fa-user"></i> ƒêƒÉng nh·∫≠p
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" href="login-khach.html">
                            üë®‚Äçüë©‚Äçüëß Kh√°ch h√†ng
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="login-admin.html">
                            üõ† Admin
                        </a>
                    </li>
                </ul>
                </div>
            </div>
        </div>

    </div>
</header>

<!-- ================= HERO ================= -->
<section class="hero">
    <div class="container hero-wrap">

        <div class="hero-text">
            <h1>
                Dinh d∆∞·ª°ng tr·ªçn v·∫πn <br>
                cho b√© y√™u kh√¥n l·ªõn
            </h1>
            <p>
                Ch√°o dinh d∆∞·ª°ng BabyCutie ƒë∆∞·ª£c n·∫•u m·ªói ng√†y
                t·ª´ nguy√™n li·ªáu t∆∞∆°i s·∫°ch ‚Äì an to√†n ‚Äì khoa h·ªçc.
            </p>

            <div class="hero-btn">
                <button class="btn-primary" onclick="window.location='thuc-don.html'">
                    ƒê·∫∑t m√≥n ngay
                </button>
                <button class="btn-outline" onclick="window.location='thuc-don.html'">
                    Xem th·ª±c ƒë∆°n
                </button>
            </div>
        </div>

        <div class="hero-img">
            <img src="images/trem.jpg" alt="Ch√°o dinh d∆∞·ª°ng">
        </div>

    </div>
</section>

<!-- ================= BENEFIT ================= -->
<section class="benefit">
    <div class="container text-center">
        <h2>L·ª£i √≠ch khi ch·ªçn BabyCutie</h2>
        <p class="sub">Ch√∫ng t√¥i ƒë·∫∑t s·ª©c kh·ªèe c·ªßa b√© l√™n h√†ng ƒë·∫ßu</p>

        <div class="row mt-4">
            <div class="col-md-4">
                <div class="benefit-card">
                    üå±
                    <h5>Nguy√™n li·ªáu t∆∞∆°i s·∫°ch</h5>
                    <p>100% th·ª±c ph·∫©m r√µ ngu·ªìn g·ªëc</p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="benefit-card">
                    ‚ù§Ô∏è
                    <h5>C√¢n b·∫±ng dinh d∆∞·ª°ng</h5>
                    <p>Th·ª±c ƒë∆°n theo t·ª´ng ƒë·ªô tu·ªïi</p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="benefit-card">
                    üöö
                    <h5>Giao h√†ng nhanh</h5>
                    <p>Giao trong ng√†y ‚Äì gi·ªØ tr·ªçn ƒë·ªô n√≥ng</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ================= FEATURED PRODUCT ================= -->
<section class="product">
    <div class="container">
        <div class="product-head">
            <h2>S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>
            <a href="thuc-don.html">Xem t·∫•t c·∫£ ‚Üí</a>
        </div>

        <!-- JS s·∫Ω render s·∫£n ph·∫©m ·ªü ƒë√¢y -->
        <div class="row" id="sanPhamNoiBat">
            <!-- s·∫£n ph·∫©m t·ª´ API -->
        </div>
    </div>
</section>

<!-- ================= STATISTICS ================= -->
<section class="statistics">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 col-6">
                <div class="stat-item">
                    <div class="stat-icon">üë∂</div>
                    <h3 class="stat-number" data-target="5000">0</h3>
                    <p>B√© y√™u ƒë√£ tin d√πng</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-item">
                    <div class="stat-icon">üç≤</div>
                    <h3 class="stat-number" data-target="50">0</h3>
                    <p>M√≥n ch√°o dinh d∆∞·ª°ng</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-item">
                    <div class="stat-icon">‚≠ê</div>
                    <h3 class="stat-number" data-target="98">0</h3>
                    <p>% Kh√°ch h√†ng h√†i l√≤ng</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-item">
                    <div class="stat-icon">üöö</div>
                    <h3 class="stat-number" data-target="24">0</h3>
                    <p>Gi·ªù giao h√†ng</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ================= PROCESS ================= -->
<section class="process">
    <div class="container">
        <h2 class="text-center mb-5">Quy tr√¨nh ƒë·∫∑t h√†ng ƒë∆°n gi·∫£n</h2>
        <div class="row">
            <div class="col-md-3 col-6">
                <div class="process-item">
                    <div class="process-number">1</div>
                    <div class="process-icon">üõí</div>
                    <h5>Ch·ªçn m√≥n</h5>
                    <p>Xem th·ª±c ƒë∆°n v√† ch·ªçn m√≥n y√™u th√≠ch</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="process-item">
                    <div class="process-number">2</div>
                    <div class="process-icon">üìù</div>
                    <h5>ƒê·∫∑t h√†ng</h5>
                    <p>Th√™m v√†o gi·ªè v√† ƒëi·ªÅn th√¥ng tin</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="process-item">
                    <div class="process-number">3</div>
                    <div class="process-icon">üí≥</div>
                    <h5>Thanh to√°n</h5>
                    <p>Thanh to√°n COD ho·∫∑c chuy·ªÉn kho·∫£n</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="process-item">
                    <div class="process-number">4</div>
                    <div class="process-icon">üöö</div>
                    <h5>Nh·∫≠n h√†ng</h5>
                    <p>Giao h√†ng t·∫≠n n∆°i n√≥ng h·ªïi</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ================= TESTIMONIALS ================= -->
<section class="testimonials">
    <div class="container">
        <h2 class="text-center mb-5">Kh√°ch h√†ng n√≥i g√¨ v·ªÅ ch√∫ng t√¥i</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <p class="testimonial-text">"B√© nh√† m√¨nh r·∫•t th√≠ch ch√°o c√° h·ªìi b√≠ ƒë·ªè. M√≥n ƒÉn th∆°m ngon, ƒë·∫ßy ƒë·ªß dinh d∆∞·ª°ng. C·∫£m ∆°n BabyCutie!"</p>
                    <div class="testimonial-author">
                        <strong>Ch·ªã Lan</strong>
                        <span>M·∫π b√© Minh (8 th√°ng)</span>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <p class="testimonial-text">"Giao h√†ng nhanh, ch√°o c√≤n n√≥ng. B√© ƒÉn ngon mi·ªáng, tƒÉng c√¢n ƒë·ªÅu. R·∫•t h√†i l√≤ng v·ªõi d·ªãch v·ª•!"</p>
                    <div class="testimonial-author">
                        <strong>Ch·ªã H∆∞∆°ng</strong>
                        <span>M·∫π b√© An (1 tu·ªïi)</span>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <p class="testimonial-text">"Th·ª±c ƒë∆°n ƒëa d·∫°ng, gi√° c·∫£ h·ª£p l√Ω. ƒê·∫∑c bi·ªát l√† nguy√™n li·ªáu t∆∞∆°i s·∫°ch, an to√†n cho b√©."</p>
                    <div class="testimonial-author">
                        <strong>Anh Tu·∫•n</strong>
                        <span>B·ªë b√© Mai (10 th√°ng)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ================= CTA SECTION ================= -->
<section class="cta-section">
    <div class="container">
        <div class="cta-box">
            <h2>ƒê·∫∑t h√†ng ngay h√¥m nay!</h2>
            <p>Nh·∫≠n ∆∞u ƒë√£i ƒë·∫∑c bi·ªát cho kh√°ch h√†ng m·ªõi</p>
            <div class="cta-buttons">
                <button class="btn-primary btn-lg" onclick="window.location='thuc-don.html'">
                    <i class="fa fa-shopping-cart"></i> Xem th·ª±c ƒë∆°n
                </button>
                <button class="btn-outline btn-lg" onclick="window.location='register-khach.html'">
                    <i class="fa fa-user-plus"></i> ƒêƒÉng k√Ω ngay
                </button>
            </div>
        </div>
</div>
</section>


<!-- ================= FOOTER ================= -->
<footer class="footer">
    <div class="container footer-wrap">
        <div>
            <b>BabyCutie</b>
            <p>Ch√°o dinh d∆∞·ª°ng cho b√© y√™u</p>
        </div>
        <div>
            <p>üìû Hotline: 1900 1234</p>
            <p>üìß babycutie@gmail.com</p>
        </div>
    </div>
</footer>

<!-- ================= TOAST NOTIFICATION ================= -->
<div id="toast" class="toast-notification"></div>

<!-- ================= JS ================= -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
const API_URL = "http://127.0.0.1:5000/api/thuc-don";
const sanPhamNoiBat = document.getElementById("sanPhamNoiBat");

// Toast notification function
function showToast(message, type = 'success') {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.className = `toast-notification ${type} show`;
    
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}

// Ki·ªÉm tra ƒëƒÉng nh·∫≠p v√† hi·ªÉn th·ªã th√¥ng tin
const token = localStorage.getItem("token");
const userInfo = JSON.parse(localStorage.getItem("user_info") || '{}');

if (token && userInfo.hoTen) {
    document.getElementById("userInfo").style.display = "block";
    document.getElementById("loginBtn").style.display = "none";
    document.getElementById("userName").textContent = userInfo.hoTen;
} else {
    document.getElementById("userInfo").style.display = "none";
    document.getElementById("loginBtn").style.display = "block";
}

function logout() {
    localStorage.removeItem("token");
    localStorage.removeItem("user_info");
    showToast("ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng", "info");
    setTimeout(() => {
        location.reload();
    }, 1000);
}

// Load s·∫£n ph·∫©m n·ªïi b·∫≠t v·ªõi loading state
function loadSanPhamNoiBat() {
    // Hi·ªÉn th·ªã loading
    sanPhamNoiBat.innerHTML = `
        <div class="col-12 text-center py-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">ƒêang t·∫£i s·∫£n ph·∫©m...</p>
        </div>
    `;

fetch(API_URL)
        .then(res => {
            if (!res.ok) throw new Error('Network response was not ok');
            return res.json();
        })
    .then(data => {
        // L·∫•y t·ªëi ƒëa 6 s·∫£n ph·∫©m ƒë·∫ßu
        const dsNoiBat = data.slice(0, 6);
        let html = "";

            if (dsNoiBat.length === 0) {
                html = `
                    <div class="col-12 text-center py-5">
                        <p class="text-muted">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</p>
                    </div>
                `;
            } else {
        dsNoiBat.forEach(sp => {
            html += `
                <div class="col-md-4 mb-4">
                            <div class="product-card" onclick="viewProductDetail(${sp.id})" style="cursor: pointer;">
                                <div class="product-image-wrapper">
                                    <img 
                                        src="http://127.0.0.1:5000/images/${sp.hinhAnh || 'default.jpg'}" 
                                        alt="${sp.tenSanPham}"
                                        onerror="this.src='images/default.jpg'"
                                    >
                                    <div class="product-overlay">
                                        <button class="btn-quick-view" onclick="event.stopPropagation(); viewProductDetail(${sp.id})">
                                            <i class="fa fa-eye"></i> Xem chi ti·∫øt
                                        </button>
                                    </div>
                                </div>
                                <div class="product-info">
                                    <h5>${sp.tenSanPham}</h5>
                                    <p class="price">${Number(sp.gia).toLocaleString('vi-VN')}ƒë</p>
                                    
                                    ${sp.moTa ? `<p class="desc">${sp.moTa.substring(0, 60)}${sp.moTa.length > 60 ? '...' : ''}</p>` : ''}

                        <div class="nutrition">
                                        <span>üí™ <b>${sp.protein || 0}g</b></span>
                                        <span>üçö <b>${sp.carb || 0}g</b></span>
                                        <span>ü•ë <b>${sp.chatBeo || 0}g</b></span>
                        </div>

                                    ${sp.doTuoi ? `<small class="age">üë∂ ${sp.doTuoi}</small>` : ''}
                                    
                                    <button class="btn-add-cart" onclick="event.stopPropagation(); addToCart(${sp.id})">
                                        <i class="fa fa-cart-plus"></i> Th√™m v√†o gi·ªè
                        </button>
                                </div>
                    </div>
                </div>
            `;
        });
            }

        sanPhamNoiBat.innerHTML = html;
    })
    .catch(err => {
        console.error("L·ªói load s·∫£n ph·∫©m:", err);
            sanPhamNoiBat.innerHTML = `
                <div class="col-12 text-center py-5">
                    <i class="fa fa-exclamation-triangle text-warning" style="font-size: 3rem;"></i>
                    <p class="mt-3 text-muted">Kh√¥ng th·ªÉ t·∫£i s·∫£n ph·∫©m. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
                    <button class="btn btn-primary mt-2" onclick="loadSanPhamNoiBat()">
                        <i class="fa fa-refresh"></i> Th·ª≠ l·∫°i
                    </button>
                </div>
            `;
        });
}

// Xem chi ti·∫øt s·∫£n ph·∫©m
function viewProductDetail(id) {
    window.location.href = `chi-tiet-san-pham.html?id=${id}`;
}

// Th√™m v√†o gi·ªè h√†ng v·ªõi loading state
function addToCart(id) {
    if (!token) {
        showToast("Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m v√†o gi·ªè h√†ng", "warning");
        setTimeout(() => {
            window.location.href = "login-khach.html";
        }, 1500);
        return;
    }

    // Disable button v√† hi·ªÉn th·ªã loading
    const buttons = document.querySelectorAll(`button[onclick*="addToCart(${id})"]`);
    buttons.forEach(btn => {
        btn.disabled = true;
        btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> ƒêang th√™m...';
    });

    fetch("http://127.0.0.1:5000/api/gio-hang", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + token
        },
        body: JSON.stringify({
            sanPham_id: id,
            soLuong: 1
        })
    })
    .then(res => res.json())
    .then(data => {
        // Re-enable buttons
        buttons.forEach(btn => {
            btn.disabled = false;
            btn.innerHTML = '<i class="fa fa-cart-plus"></i> Th√™m v√†o gi·ªè';
        });

        if (data.success) {
            showToast("‚úÖ ƒê√£ th√™m v√†o gi·ªè h√†ng!", "success");
            updateCartCount();
            // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng tr√™n n√∫t
            updateProductButtonQuantity(id);
            // Animation cho cart icon
            const cartIcon = document.querySelector('.cart-icon');
            cartIcon.classList.add('bounce');
            setTimeout(() => cartIcon.classList.remove('bounce'), 500);
        } else {
            showToast("L·ªói: " + (data.message || "Kh√¥ng th·ªÉ th√™m v√†o gi·ªè"), "error");
        }
    })
    .catch(err => {
        buttons.forEach(btn => {
            btn.disabled = false;
            btn.innerHTML = '<i class="fa fa-cart-plus"></i> Th√™m v√†o gi·ªè';
        });
        showToast("L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i.", "error");
        console.error("Error:", err);
    });
}

// C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng gi·ªè h√†ng
function updateCartCount() {
    if (!token) {
        const cartCountEl = document.getElementById("cartCount");
        if (cartCountEl) cartCountEl.textContent = "0";
        return;
    }
    
    fetch("http://127.0.0.1:5000/api/gio-hang", {
        headers: {"Authorization": "Bearer " + token}
    })
    .then(res => {
        if (!res.ok) throw new Error('Failed to fetch cart');
        return res.json();
    })
    .then(data => {
        const total = data.reduce((sum, item) => sum + item.soLuong, 0);
        const cartCountEl = document.getElementById("cartCount");
        if (cartCountEl) {
            cartCountEl.textContent = total;
            
            // Hi·ªÉn th·ªã/·∫©n badge
            if (total > 0) {
                cartCountEl.style.display = "flex";
                // Animation
                cartCountEl.classList.add("bounce");
                setTimeout(() => cartCountEl.classList.remove("bounce"), 500);
            } else {
                cartCountEl.style.display = "none";
            }
        }
    })
    .catch(() => {
        const cartCountEl = document.getElementById("cartCount");
        if (cartCountEl) cartCountEl.textContent = "0";
    });
}

// C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng tr√™n n√∫t s·∫£n ph·∫©m
function updateProductButtonQuantity(sanPhamId) {
    if (!token) return;

    fetch("http://127.0.0.1:5000/api/gio-hang", {
        headers: {"Authorization": "Bearer " + token}
    })
    .then(res => res.json())
    .then(cartItems => {
        const item = cartItems.find(i => i.sanPham_id === sanPhamId);
        const buttons = document.querySelectorAll(`button[onclick*="addToCart(${sanPhamId})"]`);
        
        buttons.forEach(btn => {
            if (item && item.soLuong > 0) {
                btn.innerHTML = `<i class="fa fa-cart-plus"></i> ƒê√£ th√™m (${item.soLuong})`;
                btn.style.background = "linear-gradient(135deg, #28a745, #20c997)";
                btn.style.color = "#fff";
            } else {
                btn.innerHTML = '<i class="fa fa-cart-plus"></i> Th√™m v√†o gi·ªè';
                btn.style.background = "";
                btn.style.color = "";
            }
        });
    })
    .catch(err => console.error("Error updating button:", err));
}

// C·∫≠p nh·∫≠t t·∫•t c·∫£ n√∫t s·∫£n ph·∫©m khi load
function updateAllProductButtons() {
    if (!token) return;

    fetch("http://127.0.0.1:5000/api/gio-hang", {
        headers: {"Authorization": "Bearer " + token}
    })
    .then(res => res.json())
    .then(cartItems => {
        cartItems.forEach(item => {
            updateProductButtonQuantity(item.sanPham_id);
        });
    })
    .catch(err => console.error("Error:", err));
}

// Search functionality - Enter key v√† click icon
function handleSearch(event) {
    if (event.key === 'Enter' || event.type === 'click') {
        const searchInput = document.getElementById('searchInput');
        const keyword = searchInput.value.trim();
        if (keyword) {
            window.location.href = `thuc-don.html?search=${encodeURIComponent(keyword)}`;
        } else {
            showToast("Vui l√≤ng nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm", "warning");
        }
    }
}

// Th√™m event listener cho search icon
document.addEventListener('DOMContentLoaded', () => {
    const searchIcon = document.querySelector('.search i.fa-search');
    if (searchIcon) {
        searchIcon.addEventListener('click', handleSearch);
        searchIcon.style.cursor = 'pointer';
    }
    
    // Load s·∫£n ph·∫©m
    loadSanPhamNoiBat();
    
    // Update cart count n·∫øu ƒë√£ ƒëƒÉng nh·∫≠p
    if (token) {
        updateCartCount();
    }
    
    // Initialize animations
    animateStats();
    animateOnScroll();
});

// Animate statistics v·ªõi c·∫£i thi·ªán
function animateStats() {
    const stats = document.querySelectorAll('.stat-number');
    if (stats.length === 0) return;
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting && !entry.target.classList.contains('animated')) {
                entry.target.classList.add('animated');
                const target = parseInt(entry.target.getAttribute('data-target'));
                const isPercent = entry.target.getAttribute('data-target') === '98';
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        entry.target.textContent = target + (isPercent ? '%' : '+');
                        clearInterval(timer);
                    } else {
                        entry.target.textContent = Math.floor(current) + (isPercent ? '%' : '+');
                    }
                }, 16);
                
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });
    
    stats.forEach(stat => observer.observe(stat));
}

// Animate elements on scroll
function animateOnScroll() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in-up');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });
    
    // Observe c√°c sections
    document.querySelectorAll('.benefit-card, .process-item, .testimonial-card, .product-card').forEach(el => {
        observer.observe(el);
    });
}

// Smooth scroll cho c√°c anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Lazy load images
if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                if (img.dataset.src) {
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                }
                observer.unobserve(img);
            }
        });
    });
    
    document.querySelectorAll('img[data-src]').forEach(img => {
        imageObserver.observe(img);
    });
}
</script>

</body>
</html>
